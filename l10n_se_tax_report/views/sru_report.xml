<?xml version="1.0" encoding="utf-8"?>
<odoo>
 <data>
  <record id="view_account_sru_declaration" model="ir.ui.view">
   <field name="name">account.sru.declaration.form</field>
   <field name="model">account.sru.declaration</field>
   <field name="arch" type="xml">
    <form string="SRU Inkompstdeklaration">
     <header>
      <button class="oe_highlight" invisible="state not in ['draft']" name="calculate" string="Beräkna" type="object"/>
      <button class="oe_highlight" invisible="state not in ['done','confirmed','canceled']" name="do_draft" string="Draft" type="object"/>
      <button class="oe_highlight" invisible="state not in ['confirmed']" name="do_done" string="Done" type="object"/>
      <button class="oe_highlight" invisible="state not in ['confirmed','done']" name="do_cancel" string="Cancel" type="object"/>
      <button class="oe_highlight" name="regenerate_sru_files" string="Regenerate SRU" type="object"/>
      <field name="state" widget="statusbar"/>
     </header>
     <sheet>
      <div class="oe_right oe_button_box" name="buttons">
       <button class="oe_stat_button" context="{'default_partner_id': active_id}" icon="fa-file" name="show_journal_entries" type="object">
        <div class="o_form_field o_stat_info">
         <span class="o_stat_value">
          <field name="move_ids_count"/>
         </span>
         <span class="o_stat_text">
          Verifikat
         </span>
        </div>
       </button>
       <button class="oe_stat_button" context="{'default_partner_id': active_id}" icon="fa-dollar" name="show_payment_orders" type="object">
        <div class="o_form_field o_stat_info">
         <span class="o_stat_value">
          <field name="payment_ids_count"/>
         </span>
         <span class="o_stat_text">
          Betalning
         </span>
        </div>
       </button>
      </div>
      <div class="oe_title">
       <label class="oe_edit_only" for="name"/>
       <h1>
        <field name="name"/>
       </h1>
      </div>
      <group>
       <group>
        <field name="date"/>
        <field domain="[('parent_id','=',False)]" name="report_id"/>
       </group>
       <newline/>
       <group col="4">
        <field domain="[('fiscalyear_id', '=', fiscalyear_id),('state','=','draft')]" name="period_start" readonly="not state" string="Period"/>
        <span>
         -
        </span>
        <field domain="[('fiscalyear_id', '=', fiscalyear_id),('id', '>=', period_start),('state','=','draft')]" name="period_stop" nolabel="1" readonly="not state"/>
       </group>
       <newline/>
       <group col="4" string="Årets resultat">
        <button class="oe_highlight" invisible="state not in ['draft','confirmed']" name="calc_arets_resultat" string="Beräkna årets resultat" title="Det kan ta tid" type="object"/>
        <newline/>
        <field name="arets_intakt"/>
        <field name="arets_kostnad"/>
        <field name="arets_resultat"/>
       </group>
       <group col="4" string="Fritt eget kapital">
        <button class="oe_highlight" invisible="state not in ['draft','confirmed']" name="calc_fritt_eget_kapital" string="Beräkna fritt eget kapital" title="Det kan ta tid" type="object"/>
        <newline/>
        <field name="tillgangar"/>
        <field name="eget_kapital_skulder"/>
        <field name="fritt_eget_kapital"/>
       </group>
       <newline/>
       <group col="4">
        <field name="move_id"/>
        <newline/>
        <field filename="infosru_file_name" name="infosru"/>
        <field invisible="1" name="infosru_file_name"/>
        <newline/>
        <field filename="datasru_file_name" name="datasru"/>
        <field invisible="1" name="datasru_file_name"/>
       </group>
      </group>
      <notebook>
       <page string="Inställningar">
        <group>
         <field name="fiscalyear_id" readonly="not state"/>
         <newline/>
         <field name="target_move" readonly="not state"/>
         <newline/>
         <field name="accounting_method" readonly="not state"/>
         <field invisible="not accounting_method" name="accounting_yearend" readonly="not state"/>
        </group>
       </page>
       <page string="Balansräkningsader">
        <field name="b_line_ids" nolabel="1">
         <tree create="0" delete="0" edit="0" editable="top">
          <field name="name"/>
          <field name="balance"/>
          <button class="oe_highlight" help="Show Move Lines" icon="fa-level-up" name="show_move_lines" type="object"/>
         </tree></field>
       </page>
       <page string="Resultaträkningsrader">
        <field name="r_line_ids" nolabel="1">
         <tree create="0" delete="0" edit="0" editable="top">
          <field name="name"/>
          <field name="balance"/>
          <button class="oe_highlight" help="Show Move Lines" icon="fa-level-up" name="show_move_lines" type="object"/>
         </tree></field>
       </page>
       <page string="Övriga rader">
        <field name="other_line_ids" nolabel="1">
         <tree create="1" delete="1" edit="1" editable="bottom">
          <field name="name"/>
          <field name="afr_id"/>
          <field name="sign"/>
          <field name="balance"/>
         </tree></field>
        <group string="Upplysningar om årsredovisningen">
         <field name="upplysningar_1"/>
         <field name="upplysningar_2"/>
        </group>
       </page>
      </notebook>
     </sheet>
     <div class="oe_chatter">
      <field groups="base.group_user" name="message_follower_ids" widget="mail_followers"/>
      <field name="message_ids" widget="mail_thread"/>
     </div>
    </form></field>
  </record>
  <record id="view_sru_tree" model="ir.ui.view">
   <field name="name">account.sru.declaration.tree</field>
   <field name="model">account.sru.declaration</field>
   <field name="arch" type="xml">
    <tree string="SRU Inkomstdeklaration">
     <field name="name"/>
     <field name="date"/>
     <field name="fiscalyear_id"/>
     <field name="state"/>
    </tree></field>
  </record>
  <record id="view_sru_calendar" model="ir.ui.view">
   <field name="name">account.sru.declaration.cal</field>
   <field name="model">account.sru.declaration</field>
   <field name="arch" type="xml">
    <calendar date_start="date" mode="month" string="SRU Inkomstdeklaration">
     <field name="name"/>
     <field name="fiscalyear_id"/>
     <field name="period_start"/>
     <field name="state"/>
    </calendar></field>
  </record>
  <record id="action_account_sru_declaration" model="ir.actions.act_window">
   <field name="name">SRU Inkomstdeklaration</field>
   <field name="type">ir.actions.act_window</field>
   <field name="res_model">account.sru.declaration</field>
   <field name="view_type">form</field>
   <field name="view_mode">tree,form,calendar</field>
   <field name="target">current</field>
  </record>
  <menuitem action="action_account_sru_declaration" id="menu_account_sru_declaration" name="Inkomstdeklaration" parent="menu_report_authorities"/>
 </data>
</odoo>